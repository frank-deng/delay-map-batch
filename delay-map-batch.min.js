!function(t,e){"use strict";"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.DelayMapBatch=e()}(this,function(){"use strict";var f=function(t,e,n,r,i,o){var c=o.batchSize;c>t.length-e&&(c=t.length-e);for(var a=0;a<c;a++)try{n(t[e+a],e+a)}catch(t){return void i(t)}e+o.batchSize<t.length?setTimeout(function(){f(t,e+o.batchSize,n,r,i,o)},o.delay):r(!0)},t=function(n,r,t){if(!Array.isArray(n))throw TypeError(String(n)+" is not an array.");if("function"!=typeof r)throw TypeError(String(r)+" is not a function.");var i={delay:0,batchSize:1};return Object.assign(i,t),new Promise(function(t,e){setTimeout(function(){f(n,0,r,t,e,i)},0)})};return t.prototype={constructor:t},t});